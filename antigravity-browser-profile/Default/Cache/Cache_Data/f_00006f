
        <!DOCTYPE html>
        <html lang="en">
          <head>
            <meta charset="UTF-8" />
            <title>Error</title>
            <script type="module">
              const error = {"message":"C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\src\\pages\\AdminDashboard.jsx: Unexpected token, expected \",\" (87:14)\n\n  85 |             // Reset form\n  86 |             setFormData({\n> 87 |             } catch (error) {\n     |               ^\n  88 |                 console.error(\"Error deleting room:\", error);\n  89 |             }\n  90 |         }","stack":"    at constructor (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:367:19)\n    at JSXParserMixin.raise (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:6624:19)\n    at JSXParserMixin.unexpected (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:6644:16)\n    at JSXParserMixin.expect (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:6924:12)\n    at JSXParserMixin.parseCallExpressionArguments (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11307:14)\n    at JSXParserMixin.parseCoverCallAndAsyncArrowHead (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11250:29)\n    at JSXParserMixin.parseSubscript (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11184:19)\n    at JSXParserMixin.parseSubscripts (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11158:19)\n    at JSXParserMixin.parseExprSubscripts (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11149:17)\n    at JSXParserMixin.parseUpdate (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11130:21)\n    at JSXParserMixin.parseMaybeUnary (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11110:23)\n    at JSXParserMixin.parseMaybeUnaryOrPrivate (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10963:61)\n    at JSXParserMixin.parseExprOps (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10968:23)\n    at JSXParserMixin.parseMaybeConditional (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10945:23)\n    at JSXParserMixin.parseMaybeAssign (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10895:21)\n    at JSXParserMixin.parseExpressionBase (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10848:23)\n    at C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10844:39\n    at JSXParserMixin.allowInAnd (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12495:16)\n    at JSXParserMixin.parseExpression (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10844:17)\n    at JSXParserMixin.parseStatementContent (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12971:23)\n    at JSXParserMixin.parseStatementLike (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12843:17)\n    at JSXParserMixin.parseStatementListItem (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12823:17)\n    at JSXParserMixin.parseBlockOrModuleBlockBody (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13392:61)\n    at JSXParserMixin.parseBlockBody (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13385:10)\n    at JSXParserMixin.parseBlock (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13373:10)\n    at JSXParserMixin.parseTryStatement (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13281:23)\n    at JSXParserMixin.parseStatementContent (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12880:21)\n    at JSXParserMixin.parseStatementLike (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12843:17)\n    at JSXParserMixin.parseStatementListItem (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12823:17)\n    at JSXParserMixin.parseBlockOrModuleBlockBody (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13392:61)\n    at JSXParserMixin.parseBlockBody (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13385:10)\n    at JSXParserMixin.parseBlock (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13373:10)\n    at JSXParserMixin.parseFunctionBody (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12174:24)\n    at JSXParserMixin.parseArrowExpression (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12149:10)\n    at JSXParserMixin.parseAsyncArrowFromCallExpression (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11328:10)\n    at JSXParserMixin.parseCoverCallAndAsyncArrowHead (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11258:27)\n    at JSXParserMixin.parseSubscript (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11184:19)\n    at JSXParserMixin.parseSubscripts (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11158:19)\n    at JSXParserMixin.parseExprSubscripts (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11149:17)\n    at JSXParserMixin.parseUpdate (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11130:21)\n    at JSXParserMixin.parseMaybeUnary (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:11110:23)\n    at JSXParserMixin.parseMaybeUnaryOrPrivate (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10963:61)\n    at JSXParserMixin.parseExprOps (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10968:23)\n    at JSXParserMixin.parseMaybeConditional (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10945:23)\n    at JSXParserMixin.parseMaybeAssign (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10895:21)\n    at C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10864:39\n    at JSXParserMixin.allowInAnd (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:12495:16)\n    at JSXParserMixin.parseMaybeAssignAllowIn (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:10864:17)\n    at JSXParserMixin.parseVar (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13460:91)\n    at JSXParserMixin.parseVarStatement (C:\\Users\\barma\\.gemini\\antigravity\\scratch\\mess-khojo\\client\\node_modules\\@babel\\parser\\lib\\index.js:13306:10)","id":"C:/Users/barma/.gemini/antigravity/scratch/mess-khojo/client/src/pages/AdminDashboard.jsx","frame":"87 |              } catch (error) {\n88 |                  console.error(\"Error deleting room:\", error);\n89 |              }\n   |          ^\n90 |          }\n91 |      };","plugin":"vite:react-babel","pluginCode":"import React, { useState, useEffect } from 'react';\r\nimport { collection, addDoc, getDocs, deleteDoc, doc, onSnapshot } from 'firebase/firestore';\r\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\nimport { db, storage, auth } from '../firebase';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport RoomCard from '../components/RoomCard';\r\nimport { Plus, LogOut, Upload } from 'lucide-react';\r\n\r\nconst AdminDashboard = () => {\r\n    const [rooms, setRooms] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [uploading, setUploading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        roomNumber: '',\r\n        rent: '',\r\n        beds: '',\r\n        bathrooms: '',\r\n        location: '',\r\n        otherInfo: '',\r\n        food: false,\r\n        waterFilter: false,\r\n        tableChair: false,\r\n        advanceDeposit: ''\r\n    });\r\n    const [imageFile, setImageFile] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = auth.onAuthStateChanged((user) => {\r\n            if (!user) navigate('/admin/login');\r\n        });\r\n\r\n        const unsubscribeRooms = onSnapshot(collection(db, \"rooms\"), (snapshot) => {\r\n            const roomsData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setRooms(roomsData);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => {\r\n            unsubscribe();\r\n            unsubscribeRooms();\r\n        };\r\n    }, [navigate]);\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'checkbox' ? checked : value\r\n        }));\r\n    };\r\n\r\n    const handleImageChange = (e) => {\r\n        if (e.target.files[0]) {\r\n            setImageFile(e.target.files[0]);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!imageFile) {\r\n            alert(\"Please select an image\");\r\n            return;\r\n        }\r\n\r\n        setUploading(true);\r\n        try {\r\n            // 1. Upload Image\r\n            const imageRef = ref(storage, `rooms/${Date.now()}_${imageFile.name}`);\r\n            const snapshot = await uploadBytes(imageRef, imageFile);\r\n            const downloadURL = await getDownloadURL(snapshot.ref);\r\n\r\n            // 2. Add to Firestore\r\n            await addDoc(collection(db, \"rooms\"), {\r\n                ...formData,\r\n                imageUrl: downloadURL,\r\n                createdAt: new Date()\r\n            });\r\n\r\n            // Reset form\r\n            setFormData({\r\n            } catch (error) {\r\n                console.error(\"Error deleting room:\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        auth.signOut();\r\n    };\r\n\r\n    return (\r\n        \u003cdiv className=\"min-h-screen bg-gray-50 pb-10\">\r\n            {/* Header */}\r\n            \u003cdiv className=\"bg-white shadow-sm sticky top-0 z-10\">\r\n                \u003cdiv className=\"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center\">\r\n                    \u003ch1 className=\"text-2xl font-bold text-gray-800\">Admin Dashboard\u003c/h1>\r\n                    \u003cbutton\r\n                        onClick={handleLogout}\r\n                        className=\"flex items-center text-gray-600 hover:text-red-600 transition-colors\"\r\n                    >\r\n                        \u003cLogOut size={20} className=\"mr-2\" /> Logout\r\n                    \u003c/button>\r\n                \u003c/div>\r\n            \u003c/div>\r\n\r\n            \u003cdiv className=\"max-w-7xl mx-auto px-4 mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Add Room Form */}\r\n                \u003cdiv className=\"lg:col-span-1\">\r\n                    \u003cdiv className=\"bg-white p-6 rounded-xl shadow-md sticky top-24\">\r\n                        \u003ch2 className=\"text-xl font-bold mb-4 flex items-center\">\r\n                            \u003cPlus size={24} className=\"mr-2 text-indigo-600\" /> Add New Room\r\n                        \u003c/h2>\r\n                        \u003cform onSubmit={handleSubmit} className=\"space-y-4\">\r\n                            \u003cdiv className=\"grid grid-cols-2 gap-4\">\r\n                                \u003cinput name=\"roomNumber\" placeholder=\"Room No.\" value={formData.roomNumber} onChange={handleInputChange} className=\"input-field\" required />\r\n                                \u003cinput name=\"rent\" placeholder=\"Rent (Total)\" value={formData.rent} onChange={handleInputChange} className=\"input-field\" required type=\"number\" />\r\n                            \u003c/div>\r\n                            \u003cdiv className=\"grid grid-cols-2 gap-4\">\r\n                                \u003cinput name=\"beds\" placeholder=\"No. of Beds\" value={formData.beds} onChange={handleInputChange} className=\"input-field\" required type=\"number\" />\r\n                                \u003cinput name=\"bathrooms\" placeholder=\"No. of Baths\" value={formData.bathrooms} onChange={handleInputChange} className=\"input-field\" required type=\"number\" />\r\n                            \u003c/div>\r\n                            \u003cinput name=\"location\" placeholder=\"Location\" value={formData.location} onChange={handleInputChange} className=\"input-field\" required />\r\n                            \u003cinput name=\"advanceDeposit\" placeholder=\"Advance Deposit\" value={formData.advanceDeposit} onChange={handleInputChange} className=\"input-field\" required type=\"number\" />\r\n\r\n                            \u003cdiv className=\"flex flex-wrap gap-4 text-sm text-gray-700\">\r\n                                \u003clabel className=\"flex items-center\">\u003cinput type=\"checkbox\" name=\"food\" checked={formData.food} onChange={handleInputChange} className=\"mr-2\" /> Food\u003c/label>\r\n                                \u003clabel className=\"flex items-center\">\u003cinput type=\"checkbox\" name=\"waterFilter\" checked={formData.waterFilter} onChange={handleInputChange} className=\"mr-2\" /> Water Filter\u003c/label>\r\n                                \u003clabel className=\"flex items-center\">\u003cinput type=\"checkbox\" name=\"tableChair\" checked={formData.tableChair} onChange={handleInputChange} className=\"mr-2\" /> Table/Chair\u003c/label>\r\n                            \u003c/div>\r\n\r\n                            \u003ctextarea name=\"otherInfo\" placeholder=\"Other Information\" value={formData.otherInfo} onChange={handleInputChange} className=\"input-field h-24\" />\r\n\r\n                            \u003cdiv className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:bg-gray-50 transition-colors cursor-pointer relative\">\r\n                                \u003cinput type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"absolute inset-0 opacity-0 cursor-pointer\" />\r\n                                \u003cdiv className=\"flex flex-col items-center text-gray-500\">\r\n                                    \u003cUpload size={24} className=\"mb-2\" />\r\n                                    \u003cspan className=\"text-sm\">{imageFile ? imageFile.name : \"Click to upload photo\"}\u003c/span>\r\n                                \u003c/div>\r\n                            \u003c/div>\r\n\r\n                            \u003cbutton\r\n                                type=\"submit\"\r\n                                disabled={uploading}\r\n                                className=\"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-lg transition-colors shadow-md disabled:opacity-50\"\r\n                            >\r\n                                {uploading ? \"Uploading...\" : \"Add Room\"}\r\n                            \u003c/button>\r\n                        \u003c/form>\r\n                    \u003c/div>\r\n                \u003c/div>\r\n\r\n                {/* Room List */}\r\n                \u003cdiv className=\"lg:col-span-2\">\r\n                    \u003ch2 className=\"text-xl font-bold mb-4\">Your Rooms\u003c/h2>\r\n                    {loading ? (\r\n                        \u003cp>Loading...\u003c/p>\r\n                    ) : rooms.length > 0 ? (\r\n                        \u003cdiv className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            {rooms.map(room => (\r\n                                \u003cRoomCard key={room.id} room={room} isAdmin={true} onDelete={handleDelete} />\r\n                            ))}\r\n                        \u003c/div>\r\n                    ) : (\r\n                        \u003cdiv className=\"text-center py-10 bg-white rounded-xl border border-dashed border-gray-300\">\r\n                            \u003cp className=\"text-gray-500\">No rooms added yet.\u003c/p>\r\n                        \u003c/div>\r\n                    )}\r\n                \u003c/div>\r\n            \u003c/div>\r\n\r\n            \u003cstyle>{`\r\n        .input-field {\r\n          width: 100%;\r\n          padding: 0.75rem 1rem;\r\n          border: 1px solid #e5e7eb;\r\n          border-radius: 0.5rem;\r\n          outline: none;\r\n          transition: all 0.2s;\r\n        }\r\n        .input-field:focus {\r\n          border-color: #6366f1;\r\n          box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);\r\n        }\r\n      `}\u003c/style>\r\n        \u003c/div>\r\n    );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","loc":{"line":87,"column":14,"index":2735}}
              try {
                const { ErrorOverlay } = await import("/@vite/client")
                document.body.appendChild(new ErrorOverlay(error))
              } catch {
                const h = (tag, text) => {
                  const el = document.createElement(tag)
                  el.textContent = text
                  return el
                }
                document.body.appendChild(h('h1', 'Internal Server Error'))
                document.body.appendChild(h('h2', error.message))
                document.body.appendChild(h('pre', error.stack))
                document.body.appendChild(h('p', '(Error overlay failed to load)'))
              }
            </script>
          </head>
          <body>
          </body>
        </html>
      